---
layout: single
title: Ch 07. 부르어리 소개 앱 만들기
toc: true
toc_sticky: true
categories: Intermediate
published: true
---


###### 기능 상세:
- API를 통해서 가져온 맥주 데이터를 레이아웃으로 전달
- 적절한 시점에 다시 데이터를 패칭

###### 활용 기술:
- **OSI Model**
  - **O**pen **S**ystems **I**nterconnection: 개방형 시스템 상호연결
  - 각 층계별로 메시지를 전달
  - 네트워크의 기본이 되는 모델
  - 여러 통신 장비 및 시스템 마다 호환성 문제가 없도록 만든 국제표준
  - 7계층
      1. **Physical Layer** 물리계층
         - 전압 레벨, 데이터 속도, 최대 전송 거리, 커넥터…(물리적 사양)
         - 케이블, 모뎀, 리피터(물리 장치)
      2. **Data Link Layer** 데이터 링크 계층
         - 데이터 오류 감지, 복구
         - MAC 주소
      3. **Network Layer** 네트워크 계층
         - 논리 주소 정의
         - IP 주소
      4. **Transport Layer** 전송 계층
         - 데이터 흐름 제어
         - TCP, UDP
      5. **Session Layer** 세션 계층
         - 통신 장치간의 상호작용 설정, 유지, 관리
      6. **Presentation Layer** 표현 계층
         - 7레벨에 적용되는 데이터 형식, 코딩, 변환 기능
         - 파일 확장자(암호화, 압축)
      7. **Application Layer** 응용 계층
         - 앱 상의 네트워크
         - HTTP
  - 캡슐화&디캡슐화: 최상단 계층에서 하위계층으로 전달될 때마다 각 계층이 인식할 수 있는 헤더를 탈부착
  
- **URL**
    - **U**niform **R**esource **L**ocator: 네트워크 상에서 리소스들이 어디 있는지를 알려주기 위한 규약
    - http:// 
         - 프로토콜
         - 예) ftp, mailto
    - www.fastcampus.com
         - 웹 서버명 -> DNS명 -> IP 주소
         - layer 3: 네트워크 계층 (IP)
    - :8080
         - 포트명
         - 기본값 생략
         - layer 4: 전송 계층 (port)
    - /ios-lecture.html
         - 데이터 출처(리소스) 경로
         - layer 7: 응용 계층
- **HTTP**
    - Request(요청)
        - 사용자가 서버에 무언가 요청할때
        - Method
            - **Get** 식별된 데이터 가져오기
            - **Post** 새 데이터를 추가
            - **Put** 식별된 기존의 데이터 수정(업데이트)
            - **Patch** PUT과 동일하지만 데이터의 일부를 수정
            - **Delete** 식별된 데이터 삭제
            - **Head** GET과 동일하지만 메시지 헤더만 반환
            - **Connect** 프락시 기능 요청
            - **Options** 웹서버에서 지원하는 메소드 확인
            - **Trace** 원격 서버 테스트용 메시지 확인
            - GET vs POST
                - GET: 파라미터가 URL상에 노출
                - POST: 전달해야 되는 파라미터를 Body안에 포함 전달하는 값이 외부에 노출x(로그인시 사용), 대량의 메시지 전달 가능, 제어 불가능, 북마크, 공유x
        - URL
        - Header
        - Body
    - Response(응답)
        - 서버가 요청에 따른 정보를 돌려줄 때
        - Status Code
            - **1xx**: 정보 전달 - 리퀘스트 수신, 진행 중
            - **2xx**: 성공 - 리퀘스트 성공적으로 수신, 해석, 승인
            - **3xx**: 리다이렉션
            - **4xx**: 클라이언트 에러
            - **5xx**: 서버 에러
        - Message 
        - Header
        - Body
  
- **URLSession**
    - iOS앱이 서버와 통신하기 위해서 애플이 제공하는 API 
    - 애플의 Foundation 프레임워크에서 제공
    - iOS를 포함한 Apple의 OS 상에서 네트워크를 구축하기 위해 활용
    - HTTP를 포함한 OSI 7계층의 포로토콜 지원, 네트워크 인증, 쿠키, 캐쉬 관리 같은 서버와의 데이터 교류 작업 전반을 지원
    - 네트워크 데이터 전송과 관련된 Task그룹 조정
    - URLSession 객체
        - URL로딩 시스템을 구현할 수 있게 하는 객체
            - URL을 통해서 상호작용하고 표준 인터넷 프로토콜을 사용해서 서버와 통신하는 시스템
        - 데이터 읽기는 비동기식으로 수행, 앱이 응답을 유지하고 수신데이터 또는 오류가 도착하는 즉시 처리
        - URLSession.shared
            - 세션에 대한 복잡한 요구사항이 없을 경우 일반적으로 사용
        - URLSessionConfiguration
            - 캐시 및 쿠키를 사용하는 방법, 또는 셀룰러 네트워크에서 연결을 허용할 지 여부와 같은 동작을 제어하는 객체 생성
            - .default
                - shared 세션과 유사, 추가적으로 설정이 더 가능(delegate)
            - .ephemeral
                - 캐시, 쿠키 또는 자격 증명을 디스크에 작성x
            - .background
                - 앱이 실행되지 않는 동안에도 백그라운드에서 컨텐츠를 업로드하거나 다운로드 수행
        - URLSessionTask
            - 세션 내에서 데이터를 서버에 업로드한 다음, 서버로부터 데이터를 검색하는 작업을 생성
            - 하위 클래스
                - URLSessionDataTask
                    - NS데이터 객체를 사용해서 데이터를 송수신
                - URLSessionUploadTask
                    - 파일을 전송하고 앱이 실행되지 않는 동안 백그라운드 업로드 지원
                - URLSessionDownloadTask
                    - 파일 형식 기반으로 데이터를 검색하고 앱이 실행되지 않는 동안에는 백그라운드 다운로드 및 업로드 지원
                - URLSessionStreamTask
                - URLSessionWebSocketTask  
- **Postman**
    - HTTP Request와 Response를 쉽게 확인하고 API라는 것을 이해할 수 있는 프로그램
    - Open API에 Request를 전송 및 전달
